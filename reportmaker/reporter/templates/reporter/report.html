{% extends "reporter/base.html" %}

{% load static %}

{% block links %}
	<link href="{% static 'reporter/style/style.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
	<div class="container-fluid">
		<div class="card">
			<div class="card-body">
				<h2 class="card-title">{{ report.id }} - {{ report.title_text }}</h2>
				<h5 class="card-subtitle my-2 text-muted">{{ report.content_text }}</h5>
				<span class="card-subtitle text-muted">Created: {{ report.pub_date }}</span>
			</div>
			<div class="card-body">
				<div class="row">
					<div class="col-5 col-md-5 col-lg-4">
						<div class="card filters">
							<div class="card-body">
								<h5 class="card-title">Filters</h5>
								<form action="" id="filter_form" method="get" class="text-right">
									<div class="input-group mb-2">
										<div class="input-group-prepend">
											<span class="input-group-text">id</span>
										</div>
										<input class="form-control" name="id_filter" form="filter_form" placeholder="Filter by id" value="{{ filters.id|default:'' }}">
									</div>
									<div class="input-group mb-2">
										<div class="input-group-prepend">
											<span class="input-group-text">Name</span>
										</div>
										<input class="form-control" name="name_filter" placeholder="Filter by name" value="{{ filters.name|default:'' }}">
									</div>
									<div class="input-group mb-2">
										<div class="input-group-prepend">
											<span class="input-group-text">State</span>
										</div>
										<input class="form-control" name="state_filter"  placeholder="Filter by state" value="{{ filters.state|default:'' }}">
									</div>
									<div class="input-group mb-2">
										<div class="input-group-prepend">
											<span class="input-group-text">RAM</span>
										</div>
										<input class="form-control" name="ram_filter"  placeholder="Filter by RAM" value="{{ filters.ram|default:'' }}">
									</div>
									<div class="input-group mb-2">
										<div class="input-group-prepend">
											<span class="input-group-text">Date</span>
										</div>
										<input class="form-control" name="date_filter" placeholder="Filter by date" value="{{ filters.date|default:'' }}">
									</div>
									<button class="btn btn-info" type="submit" style="width: 7em;">Filter</button>
								</form>
							</div>
						</div>
					</div>
					<div class="col-6 col-md-7 col-lg-8">
						<div class="card filters">
							<div class="card-body" style="overflow-x: auto;">
								<table class="table table-light table-hover">
									<thead class="thead-light">
										<tr>
											<th>ID</th>
											<th>Name</th>
											<th>State</th>
											<th>RAM (kb)</th>
											<th>Date</th>
										</tr>
									</thead>
									{% if process_list %}
										{% for process in process_list %}
											<tr>
												<td>{{ process.id }}</td>
												<td>{{ process.name_text }}</td>
												<td>{{ process.state_text }}</td>
												<td>{{ process.ram_in_kb_int }}</td>
												<td>{{ process.date }}</td>
											</tr>
										{% endfor %}
									{% else %}
										<tr>
											<td class="text-center" colspan="5">Nothing to show</td>
										</tr>
									{% endif %}
									</thead>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}